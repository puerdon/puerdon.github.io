
<!DOCTYPE html>
<html lang="zh-tw">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Puerdon Biki">
    <title>分類: Haskell - Puerdon Biki</title>
    <meta name="author" content="puerdon">
    
    
        <link rel="icon" href="https://puerdon.github.io/assets/images/favicon.ico">
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Puerdon Biki">
<meta property="og:url" content="https://puerdon.github.io/categories/Haskell/index.html">
<meta property="og:site_name" content="Puerdon Biki">
<meta property="og:locale" content="zh-tw">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Puerdon Biki">
    
    
        
    
    
        <meta property="og:image" content="https://puerdon.github.io/assets/images/c.jpg"/>
    
    
    
    

    <meta name="google-site-verification" content="vOyvfQAFYLmvRlnZlvjy_NYsLX9uYxnTJqsW3C7igb4">
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-bsrgncjn8c3trqg0ifo9txfqddmyswfbgb4xevcrxwwrdwjdmuxw5vfqgyst.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-180297173-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-180297173-1');
    </script>


    

    
</head>

    <body>
        <div id="local_search_div">
            
                  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="請入搜尋關鍵字" spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>
            
        </div>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Puerdon Biki
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打開鏈接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/c.jpg" alt="作者的圖片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/c.jpg" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">puerdon</h4>
                
                    <h4 class="sidebar-profile-bio"><p>學習筆記 / 資源整理 / 雜物堆放</p>
</h4>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/chinese-pali-dict"
                            
                            rel="noopener"
                            title="中文巴利文字典"
                        >
                        <i class="sidebar-button-icon fa fa-book" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">中文巴利文字典</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link popup-trigger"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:dondon726@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Email"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Email</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/algebraic-data-type-in-Haskell/"
                            aria-label=": Haskell 中的 Algebraic data type"
                        >
                            Haskell 中的 Algebraic data type
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-08-17T15:00:58+08:00">
	
		    8月 17, 2018
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="/categories/Haskell/">Haskell</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="問題意識"><a href="#問題意識" class="headerlink" title="問題意識"></a>問題意識</h1><p>如何根據現有的type組成新的type？有哪些組成方式？</p>
<blockquote>
<p>讓我們先把 type 想成是 一組值的集合，舉例來說，正整數的type是從1開始一路往上加1的所有值所組成的一個集合；而<code>Bool</code> type則是由<code>True</code>和F<code>alse</code>這兩個值所組成的集合。</p>
<p>我們現在問的問題是，要如何根據原有的type組出新的type，就好像是在問說，我們要怎麼根據現有的不同集合，去拼湊出一個新的集合。</p>
</blockquote>
<h1 id="兩種思路"><a href="#兩種思路" class="headerlink" title="兩種思路"></a>兩種思路</h1><h2 id="1-and思維／組合／Product-Type"><a href="#1-and思維／組合／Product-Type" class="headerlink" title="1. and思維／組合／Product Type"></a>1. and思維／組合／Product Type</h2><p>使用 and，將兩種以上的type組合在一起。假設我們想為一本書的建模，那麼我們可以說一本書是由:</p>
<ul>
<li>書名</li>
<li>作者</li>
<li>出版年份</li>
<li>頁數</li>
<li>ISBN</li>
</ul>
<p>所構成。物件導向語言中的Class，遵循的就是這樣的思路，把和一個類別相關連的所有屬性組織在一起。舉例來說，我們可以建立一個名為Book的類別，相對應的，這個Book class中具有:</p>
<ul>
<li>書名屬性（字串）</li>
<li>作者屬性（字串）</li>
<li>出版年份屬性（正整數）</li>
<li>頁數屬性（正整數）</li>
<li>ISBN屬性（正整數屬性）</li>
</ul>
<p>透過上述這種利用並列組合的思考方式，稱為<strong>Product Type</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python程式碼範例</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, title, author, year, pages, isbn)</span>:</span></span><br><span class="line">        self.title = title</span><br><span class="line">        self.author = author</span><br><span class="line">        self.year = year</span><br><span class="line">        self.pages = pages</span><br><span class="line">        self.isbn = isbn</span><br></pre></td></tr></table></figure>
<h3 id="更多例子"><a href="#更多例子" class="headerlink" title="更多例子"></a>更多例子</h3><ul>
<li>一台電腦由CPU、記憶體、鍵盤、螢幕…等所組成</li>
<li>一個地址由郵遞區號、國家、縣市、路名、巷弄、號碼所組成</li>
</ul>
<h3 id="為什麼叫作Product-type"><a href="#為什麼叫作Product-type" class="headerlink" title="為什麼叫作Product type"></a>為什麼叫作Product type</h3><blockquote>
<p>Product type的名稱與集合論中的笛卡爾積(Cartesian Product)有關。</p>
</blockquote>
<p>一個簡化的模型，</p>
<p>data ABC = ABC Bool Bool Bool</p>
<p>(True, False)</p>
<p>(False, True)</p>
<p>(True, True)</p>
<p>(False, False)</p>
<p>(待補)</p>
<h2 id="2-or思維／並列／Sum-Type"><a href="#2-or思維／並列／Sum-Type" class="headerlink" title="2. or思維／並列／Sum Type"></a>2. or思維／並列／Sum Type</h2><p>上面的and思維把焦點放在一個類型<strong>由哪些成分組合成在一起</strong>。但我們還有另一種看世界的方式：一個類型<strong>可以分別是哪些東西</strong>。舉個例子來說，我們可以根據男生、女生、其他這三種type，並列組合成<code>性別</code>這個新的type。</p>
<p>我們來對比一下兩種說法：</p>
<ul>
<li>一本書由[書名、作者、出版年、頁數]所組成</li>
<li>一個性別由[男生、女生、其他]所組成</li>
</ul>
<p>表面上，這兩個句子都是以「…由…所組成」的句型，乍看之下好像是同一件事，但其實仔細去想一下後，就可以發現其中最大的差別：</p>
<ul>
<li>一本書必須<strong>同時具有</strong>[書名、作者、出版年、頁數]</li>
<li>一個人的性別只能是[男生]或者[女生]或者[其他]<strong>其中之一</strong></li>
</ul>
<p>使用 or，例如 <code>Bool</code> type 由 True 或 False 組成。。稱為<strong>Sum Type</strong>。</p>
<h1 id="0與1"><a href="#0與1" class="headerlink" title="0與1"></a>0與1</h1><p>在乘法中，任何數a乘以1還是等於a自己。</p>
<p><code>a * 1 = a</code></p>
<p>在加法中，任何數a加上0還是等於a自己。</p>
<p><code>a + 0 = a</code></p>
<p>Void: 是一個不具有任何元素的type。</p>
<blockquote>
<p><code>data Void</code><br><code>Void</code>是一個type constructor<br><code>Void</code>沒有data constructor，因為Void這個type不具有任何元素</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data X a = X a | Y Void</span><br></pre></td></tr></table></figure>
<p>Unit: 是一個只具有一個元素的type，以<code>()</code>表示。 </p>
<blockquote>
<p><code>Unit</code>是一個type constructor<br><code>Unit</code>只有一個元素： <code>()</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type Y a = (a, ())</span><br></pre></td></tr></table></figure>
<h1 id="將Type與代數計算相關連"><a href="#將Type與代數計算相關連" class="headerlink" title="將Type與代數計算相關連"></a>將Type與代數計算相關連</h1><p>以代數中的加法與乘法來看資料結構：</p>
<h2 id="代數"><a href="#代數" class="headerlink" title="代數"></a>代數</h2><ul>
<li>Symbols: 0, 1, 2, …, x, y, z, ….</li>
<li>Operations: +, -, *, /</li>
<li>Laws: 結合律、分配律、0+x=x</li>
</ul>
<h2 id="Haskell"><a href="#Haskell" class="headerlink" title="Haskell"></a>Haskell</h2><ul>
<li>Symbols: (), Int, Bool, …</li>
<li>Operations: Type Constructors (Maybe, Either, [],…)</li>
<li>Laws: ???</li>
</ul>
<h2 id="One"><a href="#One" class="headerlink" title="One"></a>One</h2><p><code>data Unit = Unit</code></p>
<p><code>data () = ()</code><br>type 為 Unit, 其 data constructor 沒有參數。只有一個值。</p>
<h2 id="加法"><a href="#加法" class="headerlink" title="加法"></a>加法</h2><p><code>data a:+ b = AddL a | AddR b</code></p>
<p><code>data Either a b = Left a | Right b</code></p>
<p>以<code>Either Bool Bool</code>為例，一共有四個值：</p>
<ul>
<li>Left True</li>
<li>Left False</li>
<li>Right True</li>
<li>Right False</li>
</ul>
<p>因此可以作為加法的定義。</p>
<h2 id="乘法"><a href="#乘法" class="headerlink" title="乘法"></a>乘法</h2><p><code>data a:* b = Mul a b</code></p>
<p><code>data (a, b) = (a, b)</code></p>
<p>以<code>(Bool, Bool)</code>為例，一共有四個值：</p>
<ul>
<li>(T, T)</li>
<li>(T, F)</li>
<li>(F, T)</li>
<li>(F, F)</li>
</ul>
<p>tuple的第一個元素有T和F兩種選項，第二個元素也有T和F兩種選項，所以<code>(Bool, Bool)</code>會有 2 * 2 = 4 種可能。</p>
<h1 id="Zero"><a href="#Zero" class="headerlink" title="Zero"></a>Zero</h1><p><code>data Void</code></p>
<p><code>Void</code>是一個含有0個值的type。</p>
<h1 id="Two"><a href="#Two" class="headerlink" title="Two"></a>Two</h1><p><code>type Two = Unit :+ Unit</code></p>
<p><code>data Bool = True | False</code></p>
<h1 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h1><p>data a -&gt; b</p>
<p>a-&gt;b &lt;=&gt; b^ a<br>因此可以作為加法的定義。</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">數學</th>
<th style="text-align:center">Haskell</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Symbols\n東西</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Operations</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Laws</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><ul>
<li><a href="https://en.wikipedia.org/wiki/Algebraic_data_type" target="_blank" rel="noopener">Wikipedia: Algebraic Data Type</a></li>
<li><a href="https://medium.com/@willkurt/why-sum-types-matter-in-haskell-ba2c1ab4e372" target="_blank" rel="noopener">Why Sum Types Matter in Haskell</a></li>
<li><a href="https://codewords.recurse.com/issues/three/algebra-and-calculus-of-algebraic-data-types" target="_blank" rel="noopener">The algebra (and calculus!) of algebraic data types</a></li>
<li><a href="http://cs.au.dk/~mvp/stt/Algebra_of_Algebraic_Data_Types.pdf" target="_blank" rel="noopener">The Algebra of Algebraic Data Types</a></li>
<li><a href="https://stackoverflow.com/questions/16770/haskells-algebraic-data-types/5917133#5917133" target="_blank" rel="noopener">Haskell’s algebraic data types</a></li>
<li><a href="https://github.com/ScalaTaiwan/ScalaTaiwan/tree/master/2018-03-07-Programming_with_Algebraic_Data_Types" target="_blank" rel="noopener">資源整理</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/algebraic-data-type-in-Haskell/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/Haskell中的IO-Action/"
                            aria-label=": Haskell中的IO Action"
                        >
                            Haskell中的IO Action
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-08-01T16:34:31+08:00">
	
		    8月 01, 2018
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="/categories/Haskell/">Haskell</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <blockquote>
<p>參考資料：<br><a href="https://www.reddit.com/r/haskell/comments/2p9cvz/noob_question_what_is_exactly_side_effect/" target="_blank" rel="noopener">r/haskell: what is exactly side effect?</a><br><a href="https://wiki.haskell.org/Introduction_to_Haskell_IO/Actions" target="_blank" rel="noopener">Haskell Wiki: Intro to Haskell IO/Actions</a></p>
</blockquote>
<p>在Haskell中，一個interactive program被視為一個「以目前世界狀態為input、以改變後的世界狀態為output」的純函數(pure function)，新的世界狀態反映了在程式執行過程中所產生的副作用(side effect)。  </p>
<blockquote>
<p>問題：副作用是什麼？如何定義？</p>
</blockquote>
                    
                        <a
                            href="/Haskell中的IO-Action/"
                            class="postShorten-excerpt_link link"
                            aria-label=": Haskell中的IO Action"
                        >
                            繼續閱讀
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/Haskell中的polymorphic-function/"
                            aria-label=": Haskell中的polymorphic-function"
                        >
                            Haskell中的polymorphic-function
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-08-01T16:30:32+08:00">
	
		    8月 01, 2018
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="/categories/Haskell/">Haskell</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>所謂polymorphic function(多態函數)指的是<strong>可作用於多種類型的輸入</strong>的函數。</p>
                    
                        <a
                            href="/Haskell中的polymorphic-function/"
                            class="postShorten-excerpt_link link"
                            aria-label=": Haskell中的polymorphic-function"
                        >
                            繼續閱讀
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/如何在Haskell中宣告type/"
                            aria-label=": Haskell"
                        >
                            Haskell
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-07-28T00:22:13+08:00">
	
		    7月 28, 2018
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="/categories/Haskell/">Haskell</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="使用data宣告全新的type"><a href="#使用data宣告全新的type" class="headerlink" title="使用data宣告全新的type"></a>使用<code>data</code>宣告全新的type</h1><p>與type declaration只是宣告一個「關於既存類型的同義詞」不同，使用<code>data</code>關鍵字可以宣告全新的類型。<br>在Prelude中，<code>Bool</code>類型即是以下列方式宣告的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">data Bool = True | False</span><br><span class="line">```  </span><br><span class="line">- 在``=``左邊的稱為 type constructor (上例中的``Bool``)</span><br><span class="line">- 在``=``右邊的稱為 data constructor 或 value constructor (上例中的``True`` 或 ``False``)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 使用 type parameter 的時機</span><br><span class="line"></span><br><span class="line">&gt; We usually use type parameters when the type that&apos;s contained inside the data type&apos;s various value constructors isn&apos;t really that important for the type to work  </span><br><span class="line"></span><br><span class="line">f</span><br><span class="line"></span><br><span class="line">&gt; 名詞定義：</span><br><span class="line">&gt; concrete types, fully applied type: 像是 ``Maybe Int``, ``Maybe Char``</span><br><span class="line">&gt; 至於``Maybe``本身只是一個**type constructor**，並非具體的type。任何值都必須具有concrete type。  </span><br><span class="line">&gt; 比較 ``Maybe`` 和 ``Maybe Int``:``Maybe``是一個type constructor，``Maybe Int``則是一個 concrete type</span><br><span class="line"></span><br><span class="line">## 好好區分 type constructor 和 data constructor</span><br><span class="line">type constructor只能出現在下面用``...``表示的幾個地方:</span><br><span class="line"></span><br><span class="line">-  ``data ... =`` </span><br><span class="line">-  ``type ... =`` </span><br><span class="line">-  ``::...``</span><br><span class="line">-  ``instance Eq ... where``</span><br><span class="line"></span><br><span class="line"># 使用``type``為現存的type宣告新的別名</span><br><span class="line"></span><br><span class="line">稱為 type synonym。用來給一個既有type提供一個別名。什麼時候需要這樣大費周章為已經存在的type提供新的名稱？</span><br><span class="line"></span><br><span class="line">&gt; We introduce type synonyms either to describe what some existing type represents in our functions (and thus our type declarations become better documentation) or when something has a long-ish type that&apos;s repeated a lot (like ``[(String,String)]``) but represents something more specific in the context of our functions.</span><br><span class="line">&gt; [LYAH](http://learnyouahaskell.com/making-our-own-types-and-typeclasses)</span><br><span class="line"></span><br><span class="line">``Char``是一個Haskell本身就定義好的type，如果要以``Char``為基礎，建立新的type，那麼就要使用``type``:</span><br></pre></td></tr></table></figure></p>
<p>type String = [Char]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">``Int``也是一個Haskell本身就有的、用以表達整數的type，如果想建立一個正整數座標的Point type，並包在tuple中，可以使用：</span><br></pre></td></tr></table></figure></p>
<p>type Point = (Int, Int)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">當然，定義好新的type之後，新的type就可以用在別的type宣告中。</span><br><span class="line"></span><br><span class="line">也許有一系列的function都與「將一個Point轉換到另一個Point」有關，因此可以為這群函數宣告一個新的type：</span><br></pre></td></tr></table></figure></p>
<p>type Transformation = Point -&gt; Point<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Type synonym也可以具有type parameters</span><br></pre></td></tr></table></figure></p>
<p>type Pair a = (a, a)<br><code>`</code><br>一個Pair可以是Pair Int (Int, Int)，可能是(Char, Char)</p>
<h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><ul>
<li><a href="https://wiki.haskell.org/Constructor" target="_blank" rel="noopener">Constructor on Haskell Wiki</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/如何在Haskell中宣告type/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 頁 共 1 頁</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 puerdon. All Rights Reserved.
    </span>
</footer>

            </div>
            

            


        </div>

        

        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/c.jpg" alt="作者的圖片"/>
        
            <h4 id="about-card-name">puerdon</h4>
        
            <div id="about-card-bio"><p>學習筆記 / 資源整理 / 雜物堆放</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>語言學研究</p>

            </div>
        
        
    </div>
</div>

        
        
        
<div id="cover" style="background-image:url('/assets/images/Wavey-Fingerprint.svg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-aetjvyktz17qluf8ocltzu6gt6travkkszybgyi4ioqv7b5oufsrmtzg2aas.min.js"></script>
<!--SCRIPTS END-->





<!-- Leipzig glossing -->
<script src="https://cdn.jsdelivr.net/npm/leipzig@latest/dist/leipzig.min.js"></script>
<script>
    jQuery(function() { Leipzig().gloss(); });
</script>

        
            

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      jQuery('.popup').hide();
      jQuery('#local-search-input').val('');
      jQuery('.search-result-list').remove();
      jQuery('#no-result').remove();
      jQuery(".local-search-pop-overlay").remove();
      jQuery('body').css('overflow', '');
    }

    function proceedsearch() {
      jQuery("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      jQuery('.search-popup-overlay').click(onPopupClose);
      jQuery('.popup').toggle();
      var jQuerylocalSearchInput = jQuery('#local-search-input');
      jQuerylocalSearchInput.attr("autocapitalize", "none");
      jQuerylocalSearchInput.attr("autocorrect", "off");
      jQuerylocalSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      jQuery("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      jQuery("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

     

      jQuery.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          jQuery('.popup').detach().appendTo('#local_search_div');
          var datas = isXml ? jQuery("entry", res).map(function() {
            return {
              title: jQuery("title", this).text(),
              content: jQuery("content",this).text(),
              url: jQuery("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          console.log(input);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            jQuery('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          jQuery(".local-search-pop-overlay").remove();
          jQuery('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    jQuery('.popup-trigger').click(function(e) {
      // e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    jQuery('.popup-btn-close').click(onPopupClose);
    jQuery('.popup').click(function(e){
      e.stopPropagation();
    });
    jQuery(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        jQuery('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>



        
    </body>
</html>
